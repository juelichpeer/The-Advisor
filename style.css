/* ----- Base ----- */
:root{
  --bg:#F2F2F7; /* iOS grouped background */
  --surface:#FFFFFF;
  --border:#E5E5EA;
  --text:#111111;
  --subtle:#6B7280;
  --tint:#0A84FF; /* iOS blue */
  --radius:16px;
  --blur:18px;
  --rail-w:264px;
  --bar-h:84px;
  --ease:cubic-bezier(.22,.61,.36,1);
}
*{box-sizing:border-box}
html,body{height:100%}
html,body,#app{margin:0;padding:0}
body{
  font-family:-apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Arial, sans-serif;
  background:var(--bg); color:var(--text);
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}

/* Background */
.app.bg{
  position:fixed; inset:0;
  background:var(--bg);
}

/* ----- Navigation ----- */
.nav{
  position:fixed; z-index:1000; display:flex; background:rgba(255,255,255,0.72);
  backdrop-filter:saturate(140%) blur(20px); -webkit-backdrop-filter:saturate(140%) blur(20px);
  border:1px solid rgba(0,0,0,0.06); box-shadow:0 8px 30px rgba(0,0,0,0.06);
  border-radius:22px;
}

/* Rail (desktop) */
.nav-rail{
  top:16px; bottom:16px; left:16px; width:var(--rail-w); padding:12px;
  flex-direction:column; gap:6px; display:none;
}
@media (min-width: 900px){ .nav-rail{ display:flex; } }

.nav-btn{
  display:flex; align-items:center; gap:12px; width:100%;
  padding:12px 12px; border:0; background:transparent; color:#1C1C1E;
  font-size:15px; border-radius:12px; cursor:pointer; outline:none;
  transition:background 140ms var(--ease), transform 120ms var(--ease);
}
.nav-btn svg{ width:22px; height:22px; }
.nav-btn:active{ transform:scale(0.98); }
.nav-btn.is-active{ background:rgba(10,132,255,0.12); color:var(--tint); }
.nav-btn.is-active svg{ color:var(--tint); }

/* Bottom bar (mobile) */
.nav-bottom{
  left:16px; right:16px; bottom:16px; height:var(--bar-h); padding:10px;
  display:flex; align-items:center; justify-content:space-between;
}
@media (min-width: 900px){ .nav-bottom{ display:none; } }
.nav-bottom .nav-btn{ flex:1; justify-content:center; border-radius:14px; padding:12px; }
.nav-bottom .nav-btn svg{ width:28px; height:28px; }

/* ----- Views common ----- */
.view{
  position:absolute; inset:0;
  padding: max(20px, env(safe-area-inset-top))
           max(16px, env(safe-area-inset-right))
           max(16px, env(safe-area-inset-bottom) + var(--bar-h))
           max(16px, env(safe-area-inset-left));
  display:block; overflow:auto;
}
@media (min-width:900px){
  .view{ padding-left: calc(var(--rail-w) + 28px); padding-bottom: 24px; }
}

/* ----- Splash (light) ----- */
.splash{ display:grid; place-items:center; }
.splash-inner{
  text-align:center; transform: translateY(6px) scale(.985); opacity:0;
  animation: cardIn 600ms var(--ease) 120ms forwards;
}
.welcome-headline{
  margin:0; font-weight:700; letter-spacing:-.02em;
  font-size: clamp(28px, 6vw, 40px);
}
.welcome-headline span{ display:inline-block; opacity:0; transform: translateY(14px); }
.welcome-headline span:nth-child(1){ animation: rise .55s var(--ease) .20s forwards; }
.welcome-headline span:nth-child(2){ animation: rise .55s var(--ease) .34s forwards; }
.welcome-headline span:nth-child(3){ animation: rise .55s var(--ease) .48s forwards; }
.welcome-sub{ margin-top:6px; font-size:14px; color:var(--subtle); opacity:0; animation: fade .5s var(--ease) .62s forwards; }

/* radial merge */
.merge-mask{ position:absolute; inset:0; pointer-events:none; clip-path:circle(0% at 50% 50%); }
body.merge .merge-mask{ animation: reveal .7s var(--ease) forwards; }

/* ----- Home (dashboard) ----- */
.container{
  max-width: 1100px; margin: 0 auto;
}
.hero{ padding: 8px 0 12px; }
.eyebrow{ color:var(--subtle); font-size:13px; letter-spacing:.02em; margin-bottom:6px; }
#greeting{ font-size: clamp(22px, 4.8vw, 28px); font-weight: 700; letter-spacing:-.01em; }

/* Tiles (iOS-like) */
.tiles{
  display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:12px;
  margin: 8px 0 18px;
}
.tile{
  appearance:none; border:1px solid var(--border); background:var(--surface);
  border-radius:22px; padding:18px 16px; text-align:left; cursor:pointer;
  box-shadow: 0 1px 0 rgba(255,255,255,.7) inset, 0 8px 20px rgba(0,0,0,0.04);
  transition: transform 120ms var(--ease), box-shadow 160ms var(--ease), border-color 160ms var(--ease);
}
.tile:active{ transform:scale(.98); box-shadow: 0 6px 14px rgba(0,0,0,.06); }
.tile-icon{ font-size:22px; line-height:1; margin-bottom:10px; }
.tile-label{ font-size:15px; font-weight:600; }

/* Cards */
.cards{ display:grid; grid-template-columns: repeat(12, 1fr); gap:14px; }
.card{
  grid-column: span 12; background:var(--surface); border:1px solid var(--border); border-radius:18px;
  padding:16px; box-shadow: 0 1px 0 rgba(255,255,255,.7) inset, 0 10px 24px rgba(0,0,0,.05);
}
@media (min-width: 700px){
  .card{ grid-column: span 6; }
}
.card-title{ margin:0 0 10px; font-size:16px; font-weight:700; }
.skeleton{ height:120px; border-radius:12px; background: linear-gradient(90deg,#eee,#f7f7f7,#eee);
  background-size: 200% 100%; animation: shimmer 1.4s linear infinite; }

/* ----- States & Anims ----- */
.dashboard{ opacity:0; }
body.show-dashboard #splash{ animation: splashOut .6s var(--ease) forwards; }
body.show-dashboard #dashboard{ display:block; animation: fadeIn .55s var(--ease) .1s forwards; }
body.show-dashboard #dashboard[hidden]{ display:block; }

@keyframes cardIn{ to{ opacity:1; transform: translateY(0) scale(1); } }
@keyframes rise{ to{ opacity:1; transform: translateY(0); } }
@keyframes fade{ to{ opacity:.9; } }
@keyframes fadeIn{ from{ opacity:0 } to{ opacity:1 } }
@keyframes splashOut{ to{ opacity:0; transform: translateY(-6px) } }
@keyframes reveal{ 0%{clip-path: circle(0% at 50% 50%)} 100%{clip-path: circle(140% at 50% 50%)} }
@keyframes shimmer{ 0%{ background-position-x: 200% } 100%{ background-position-x: -200% } }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition-duration:.001ms !important; }
}
